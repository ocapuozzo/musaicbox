(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],i[o]&&d.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={app:0},a=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"094dc7df"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=i[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise(function(e,n){s=i[t]=[e,n]});e.push(s[2]=n);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t),a=function(e){c.onerror=c.onload=null,clearTimeout(l);var s=i[t];if(0!==s){if(s){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");o.type=n,o.request=a,s[1](o)}i[t]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/musaicbox/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("64a9"),i=s.n(n);i.a},"2ae9":function(t,e,s){},4570:function(t,e,s){"use strict";var n=s("5415"),i=s.n(n);i.a},5415:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n,i,a=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"app"}},[s("nav",{attrs:{id:"sidebar"}},[s("div",{staticClass:"sidebar-header"},[s("h3",[s("router-link",{attrs:{to:"/"}},[t._v("MusaicBox")])],1)]),s("ul",{staticClass:"list-unstyled components"},[s("li",{staticClass:"active"},[s("router-link",{attrs:{to:"/"}},[t._v("Interactive")])],1),s("li",[s("a",{staticClass:"dropdown-toggle",attrs:{href:"#homeSubmenu","data-toggle":"collapse","aria-expanded":"false"}},[t._v("Predefined")]),s("ul",{staticClass:"collapse list-unstyled",attrs:{id:"homeSubmenu"}},[s("li",[s("router-link",{attrs:{to:"/"}},[t._v("Chords")])],1),s("li",[s("router-link",{attrs:{to:"/about"}},[t._v("Scales")])],1),t._m(0)])]),s("li",[s("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),t._m(1)]),t._m(2)]),s("div",{attrs:{id:"content"}},[t._m(3),s("router-view")],1)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{staticClass:"dropdown-toggle",attrs:{href:"#pageSubmenu","data-toggle":"collapse","aria-expanded":"false"}},[t._v("Autres entrÃ©es")]),s("ul",{staticClass:"collapse list-unstyled",attrs:{id:"pageSubmenu"}},[s("li",[s("a",{attrs:{href:"#"}},[t._v("Page 1")])]),s("li",[s("a",{attrs:{href:"#"}},[t._v("Page 2")])]),s("li",[s("a",{attrs:{href:"#"}},[t._v("Page 3")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"#"}},[t._v("Contact")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"list-unstyled CTAs"},[s("li",[s("a",{staticClass:"download",attrs:{href:"#"}},[t._v("Download source")])]),s("li",[s("a",{staticClass:"article",attrs:{href:"#"}},[t._v("Back to article")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("div",{staticClass:"container-fluid"},[s("button",{staticClass:"navbar-btn",attrs:{type:"button",id:"sidebarCollapse"}},[s("span"),s("span"),s("span")]),s("button",{staticClass:"btn btn-dark d-inline-block d-lg-none ml-auto",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("i",{staticClass:"fas fa-align-justify"})]),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"nav navbar-nav ml-auto"},[s("li",{staticClass:"nav-item active"},[s("a",{staticClass:"nav-link",attrs:{href:"http://88musaics.org"}},[s("span",{staticStyle:{"font-style":"italic","font-size":"small"}},[t._v("from 88musaics.org")])])])])])])])}],c=s("1157"),l=s.n(c),u=l.a,h={mounted:function(){u(document).ready(function(){u("#sidebarCollapse").on("click",function(){u("#sidebar").toggleClass("active"),u(this).toggleClass("active")})})}},d=h,f=(s("034f"),s("2877")),p=Object(f["a"])(d,o,r,!1,null,null,null),m=p.exports,v=s("8c4f"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{class_:"container bg-white"}},[s("div",{staticClass:"row mr-1"},[s("div",{staticClass:"p-2 col",staticStyle:{"max-width":"300px"}},[s("h3",[t._v("Musaic")]),s("MusaicBox",{staticClass:"shadow p-3 mb-5 bg-white rounded",staticStyle:{width:"250px",height:"350px"},attrs:{_pcs:"[1,0,0,1,0,0,0,1,0,0,0,0]"},on:{onpcs:t.onPcsChange}})],1),s("div",{staticClass:"p-2 shadow mb-5 bg-white rounded col",staticStyle:{"min-width":"350px"}},[s("h4",{staticClass:"text-center title-detail pb-2"},[t._v("Analysis")]),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm text-left"},[s("p",[t._v("\n              Binary :\n              "),s("span",{staticClass:"binary-pcs"},[t._v(t._s(t.pcs))])]),s("p",[t._v("\n              PCS :\n              "),s("span",{staticClass:"binary-pcs"},[t._v(t._s(t.pcsstr))])]),s("my-canvas",{staticStyle:{width:"250px",height:"250px","border-style":"solid"},attrs:{id:"ccanvas"}},[s("ClockBis",{attrs:{color:"white"}})],1)],1)])])])])])},b=[],y=(s("6b54"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("canvas",{ref:"mcanvas",staticStyle:{border:"1px solid #BBB"},attrs:{id:"mcanvas"}})]),s("div",{staticClass:"extra content text-center aligned"},[s("img",{ref:"m11",staticClass:"actionable img-fluid",attrs:{id:"m11",src:"img/m11.png",width:"70"}}),s("img",{ref:"m5",staticClass:"actionable img-fluid",attrs:{id:"m5",src:"img/m5.png",width:"70"}}),s("img",{ref:"m7",staticClass:"actionable img-fluid",attrs:{id:"m7",src:"img/m7.png",width:"70"}})])])}),w=[],C=(s("6c7b"),{name:"MusaicBox",props:{_pcs:String},data:function(){return{pcsold:[0,0,0,0,0,0,0,0,0,0,0,0],CEL_WIDTH:10}},computed:{pcs:{get:function(){return this.$store.state.mypcs},set:function(t){this.$store.commit("changepcs",t)}}},mounted:function(){var t=this.$refs.mcanvas;this.addOpTransfOnClickListeners(),this.$el.addEventListener("animationend",this.listenerEndAnim),t.width=t.parentElement.clientWidth,t.height=t.parentElement.clientWidth,t.addEventListener("mousedown",this.mousedown),this._pcs?this.pcs=JSON.parse(this._pcs):this.pcs=[1,0,0,0,0,0,0,0,0,0,0,0],this.CEL_WIDTH=t.width/(this.pcs.length+1),this.transformsPcsAndDrawsMusaic(this.opId)},methods:{mousedown:function(t){var e=this.$refs.mcanvas,s=e.getBoundingClientRect(),n=t.clientX-s.left,i=t.clientY-s.top,a=(5*Math.floor(n/this.CEL_WIDTH)+Math.floor(i/this.CEL_WIDTH))%this.pcs.length;a>0&&(this.$set(this.pcs,a,this.pcs[a]?0:1),this.transformsPcsAndDrawsMusaic(this.opId))},opM:function(t,e){for(var s=t.length,n=t.slice().fill(0),i=0;i<s;i++)n[i]=t[i*e%s];return n},opM5:function(t){return this.opM(t,5)},opM7:function(t){return this.opM(t,7)},opM11:function(t){return this.opM(t,11)},opId:function(t){return t},transformsPcsAndDrawsMusaic:function(t){var e=this.$refs["mcanvas"];if(e.getContext){e.width=e.parentElement.clientWidth,e.height=e.parentElement.clientWidth,console.log("before op : "+this.pcs),this.pcs=t(this.pcs),console.log("after op : "+this.pcs);var s=this.pcs.length,n=e.getContext("2d");n.strokeStyle="black";for(var i=e.width/(s+1),a=0;a<=s;a++)for(var o=0;o<=s;o++)1==this.pcs[(a+5*o)%s]?(n.fillStyle="rgb(0, 0, 0)",n.fillRect(o*i,a*i,i,i),n.strokeRect(o*i,a*i,i,i)):(n.fillStyle="white",n.fillRect(o*i,a*i,i,i),n.strokeRect(o*i,a*i,i,i));this.CEL_WIDTH=i}},addOpTransfOnClickListeners:function(){var t=this.$refs["mcanvas"],e=this;document.getElementById("m11").onclick=function(){e.isCursorWait()||(e.disableButtons(),t.classList.add("rotateM11"))},document.getElementById("m5").onclick=function(){e.isCursorWait()||(e.disableButtons(),t.classList.add("rotateM5"))},document.getElementById("m7").onclick=function(){e.isCursorWait()||(e.disableButtons(),t.classList.add("rotateM7"))}},clearRotateClasses:function(){var t=this.$refs["mcanvas"];t.classList.contains("rotateM11")&&t.classList.remove("rotateM11"),t.classList.contains("rotateM5")&&t.classList.remove("rotateM5"),t.classList.contains("rotateM7")&&t.classList.remove("rotateM7")},disableButtons:function(){this.$refs["m11"].disabled=!0,this.$refs["m5"].disabled=!0,this.$refs["m7"].disabled=!0,this.$refs["m11"].style.cursor="wait",this.$refs["m5"].style.cursor="wait",this.$refs["m7"].style.cursor="wait"},enabledButtons:function(){this.$refs["m11"].style.cursor="pointer",this.$refs["m5"].style.cursor="pointer",this.$refs["m7"].style.cursor="pointer",this.$refs["m11"].disabled=!1,this.$refs["m5"].disabled=!1,this.$refs["m7"].disabled=!1},listenerEndAnim:function(t){var e;switch(t.target.className){case"rotateM11":e=this.opM11;break;case"rotateM5":e=this.opM5;break;case"rotateM7":e=this.opM7;break;default:e=this.opId}this.transformsPcsAndDrawsMusaic(e),this.$emit("onpcs",this.pcs),this.clearRotateClasses(),this.enabledButtons()},isCursorWait:function(){return"wait"==this.$refs["m11"].style.cursor}}}),_=C,x=(s("77ea"),Object(f["a"])(_,y,w,!1,null,"103c46f6",null)),$=x.exports,M=s("d225"),S=s("b0b4"),k=function(){function t(e,s,n,i){Object(M["a"])(this,t),this.x=e,this.y=s,this.w=n,this.h=i}return Object(S["a"])(t,[{key:"contains",value:function(t,e){return t>=this.x-this.w/2&&t<=this.x+this.w/2&&e>=this.y-this.h/2&&e<=this.y+this.h/2}},{key:"draw",value:function(t){t.beginPath(),t.fillRect(this.x-this.w/2,this.y-this.h/2,this.w,this.h),t.stroke()}},{key:"toString",value:function(){return"{"+this.x+","+this.y+","+this.w+","+this.h+"}"}}]),t}(),P={inject:["provider"],name:"ClockBis",mouseEventDone:!1,points:[],mousedownTimeout:null,props:{color:{type:String,default:"#F00"}},data:function(){return{iRoot:0}},computed:{pcs:{get:function(){return console.log("clock pcs get"),this.$store.state.mypcs},set:function(t){this.$store.dispatch("changepcs",t)}},cardinal:function(){return this.$store.getters.pcsCard}},methods:{getSelected:function(t){for(var e=this.provider.context,s=e.canvas,n=s.getBoundingClientRect(),i=t.clientX-n.left,a=Math.round(t.clientY-n.top),o=-1,r=0;r<this.$options.points.length;r++)if(this.$options.points[r].contains(i,a)){o=r;break}return o},isSelected:function(t){return 1==this.pcs[t]},setIRoot:function(t){this.iRoot=t,this.$set(this.pcs,t,1)},mousemove:function(t){var e=this.getSelected(t);e>=0&&console.log("mouse move : index/pitch selected = "+e)},mousedown:function(t){var e=this.getSelected(t);if(e>=0){var s=this;this.$options.mousedownTimeout=setTimeout(function(){s.setIRoot(e)},500)}},mouseup:function(t){clearTimeout(this.$options.mousedownTimeout);var e=this.getSelected(t);e>=0&&e!=this.iRoot&&(this.$set(this.pcs,e,1==this.pcs[e]?0:1),this.pcs=this.pcs)},drawCirclePitch:function(t,e,s,n){var i;t.beginPath(),t.arc(0,0,s,0,2*Math.PI);var a=this.isSelected(e)?e==this.iRoot?"red":"yellow":"white";t.fillStyle=a,t.fill(),i=t.createRadialGradient(0,0,.8*s,0,0,1.2*s),i.addColorStop(0,"#333"),i.addColorStop(.5,"white"),i.addColorStop(1,"#333"),t.strokeStyle=i,t.lineWidth=n,t.stroke(),t.beginPath(),t.fillStyle="#333",t.fill(),e<10?t.fillText(e.toString(),-.1,1):t.fillText(e.toString(),-.5,1)},drawPitches:function(t,e){var s;t.font=.1*e+"px arial",t.textBaseline="middle",t.textAlign="center";for(var n=Math.round(e/9),i=0;i<12;i++)s=i*Math.PI/6,t.rotate(s),t.translate(0,-e),t.rotate(-s),this.drawCirclePitch(t,i,n,6),t.rotate(s),t.translate(0,e),t.rotate(-s)},drawPolygon:function(t){var e=this.$options.points,s=!0;t.save(),t.fillStyle="black",t.beginPath();for(var n=0;n<this.pcs.length;n++)1==this.pcs[n]&&s?(s=!1,t.moveTo(e[n].x,e[n].y)):1==this.pcs[n]&&t.lineTo(e[n].x,e[n].y);t.closePath(),t.stroke(),t.restore()},computePitchesRegionSelected:function(t,e,s,n,i){for(var a,o,r=Math.round(i/11),c=3*Math.PI/2,l=0;l<12;l++)a=2*r+Math.round(s+Math.cos(c)*i),o=2*r+Math.round(n+Math.sin(c)*i),this.$options.points[l]=new k(a-2*r,o-2*r,3*r,3*r),c+=Math.PI/6},drawClock:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height);var e=t.canvas.width/2,s=t.canvas.height/2,n=Math.round(t.canvas.clientWidth/2*.75);this.computePitchesRegionSelected(t.canvas,t,e,s,n),this.drawPolygon(t),t.save(),t.translate(e,s),this.drawPitches(t,n),t.translate(-e,-s),t.restore()}},render:function(){if(this.provider.context){this.$options.mouseEventDone||(this.provider.elt.addEventListener("mouseup",this.mouseup),this.provider.elt.addEventListener("mousedown",this.mousedown),this.$options.mouseEventDone=!0);var t=this.provider.context;this.drawClock(t)}}},E=P,B=(s("fa75"),Object(f["a"])(E,n,i,!1,null,null,null)),T=B.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-canvas-wrapper"},[s("canvas",{ref:"my-canvas"}),t._t("default")],2)},j=[],L={name:"MyCanvas",data:function(){return{provider:{context:null,elt:null}}},provide:function(){return{provider:this.provider}},mounted:function(){this.provider.context=this.$refs["my-canvas"].getContext("2d"),this.provider.elt=this.$refs["my-canvas"],this.$refs["my-canvas"].width=this.$refs["my-canvas"].parentElement.clientWidth,this.$refs["my-canvas"].height=this.$refs["my-canvas"].parentElement.clientHeight}},I=L,R=Object(f["a"])(I,O,j,!1,null,null,null),W=R.exports,A={name:"home",methods:{onPcsChange:function(t){this.pcs=t}},computed:{pcs:{get:function(){return this.$store.state.mypcs},set:function(t){this.$store.dispatch("changepcs",t)}},pcsstr:function(){for(var t="",e=0;e<this.pcs.length;e++){var s=this.pcs[e];s&&(t=t?t+", "+e.toString():e.toString())}return"[ "+t+" ]"}},components:{MusaicBox:$,MyCanvas:W,ClockBis:T}},D=A,H=(s("4570"),Object(f["a"])(D,g,b,!1,null,"74e06eab",null)),N=H.exports;a["a"].use(v["a"]);var F=new v["a"]({mode:"history",base:"/musaicbox/",routes:[{path:"/",name:"home",component:N},{path:"/about",name:"about",component:function(){return s.e("about").then(s.bind(null,"f820"))}}]}),J=s("9483");Object(J["a"])("".concat("/musaicbox/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});s("4989"),s("ab8b"),s("bfe7");var q=s("2f62");a["a"].use(q["a"]);var X=new q["a"].Store({state:{mypcs:[1,1,0,0,0,0,0,0,0,0,0,0]},mutations:{changepcs:function(t,e){console.log("mutation changepcs whith :"+e),t.mypcs=e}},getters:{pcsCard:function(t){return t.mypcs.filter(function(t){return 1==t}).length},mypcs:function(t){return t.mypcs}},actions:{changepcs:function(t,e){console.log("action changepcs whith :"+e),t.mypcs=e}}});a["a"].config.productionTip=!1,new a["a"]({router:F,store:X,render:function(t){return t(m)}}).$mount("#app")},"64a9":function(t,e,s){},"77ea":function(t,e,s){"use strict";var n=s("a07c"),i=s.n(n);i.a},a07c:function(t,e,s){},bfe7:function(t,e,s){},fa75:function(t,e,s){"use strict";var n=s("2ae9"),i=s.n(n);i.a}});
//# sourceMappingURL=app.a138a1dc.js.map